/*!
 * Viewer v0.1.0
 * https://github.com/fengyuanchen/viewerjs
 *
 * Copyright (c) 2015 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2015-12-24T07:15:17.423Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Viewer requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e){return Se.call(e).slice(8,-1).toLowerCase()}function n(e){return"string"==typeof e}function a(e){return"number"==typeof e&&!isNaN(e)}function o(e){return"undefined"==typeof e}function r(e){return"object"==typeof e&&null!==e}function s(e){var t,i;if(!r(e))return!1;try{return t=e.constructor,i=t.prototype,t&&i&&Ne.call(i,"isPrototypeOf")}catch(n){return!1}}function l(e){return"function"===i(e)}function u(e){return Array.isArray?Array.isArray(e):"array"===i(e)}function c(e,t){var i=[];return Array.from?Array.from(e).slice(t||0):(a(t)&&i.push(t),i.slice.apply(e,i))}function d(e,t){var i=-1;return t.indexOf?t.indexOf(e):(f(t,function(t,n){return t===e?(i=n,!1):void 0}),i)}function m(e){return n(e)&&(e=e.trim?e.trim():e.replace(ze,"1")),e}function f(e,t){var i,n;if(e&&l(t))if(u(e)||a(e.length))for(n=0,i=e.length;i>n&&t.call(e,e[n],n,e)!==!1;n++);else if(r(e))for(n in e)if(e.hasOwnProperty(n)&&t.call(e,e[n],n,e)===!1)break;return e}function v(e){var t;if(arguments.length>1){if(t=c(arguments),Object.assign)return Object.assign.apply(Object,t);t.shift(),f(t,function(t){f(t,function(t,i){e[i]=t})})}return e}function h(e,t){var i=c(arguments,2);return function(){return e.apply(t,i.concat(c(arguments)))}}function g(e,t){var i=e.style;f(t,function(e,t){xe.test(t)&&(e+="px"),i[t]=e})}function w(t){return e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle}function p(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function b(e,t){var i;return a(e.length)?f(e,function(e){b(e,t)}):e.classList?e.classList.add(t):(i=m(e.className),void(i?i.indexOf(t)<0&&(e.className=i+" "+t):e.className=t))}function y(e,t){return a(e.length)?f(e,function(e){y(e,t)}):e.classList?e.classList.remove(t):void(e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function x(e,t,i){return a(e.length)?f(e,function(e){x(e,t,i)}):void(i?b(e,t):y(e,t))}function z(e,t){return r(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}function D(e,t,i){r(i)&&o(e[t])?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-"+t,i)}function T(e,t){r(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+t)}function I(e,t,i,n){var a=m(t).split(De),o=i;return a.length>1?f(a,function(t){I(e,t,i)}):(n&&(i=function(){return E(e,t,i),o.apply(e,arguments)}),void(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)))}function E(e,t,i){var n=m(t).split(De);return n.length>1?f(n,function(t){E(e,t,i)}):void(e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i))}function k(e,t){var i;return e.dispatchEvent?(l(q)?i=new q(t,{bubbles:!0,cancelable:!0}):(i=W.createEvent("Event"),i.initEvent(t,!0,!0)),e.dispatchEvent(i)):e.fireEvent?e.fireEvent("on"+t):void 0}function L(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Y(t){var i,n=t||e.event;return n.target||(n.target=n.srcElement||W),a(n.pageX)||(i=W.documentElement,n.pageX=n.clientX+(e.scrollX||i&&i.scrollLeft||0)-(i&&i.clientLeft||0),n.pageY=n.clientY+(e.scrollY||i&&i.scrollTop||0)-(i&&i.clientTop||0)),n}function X(e,t,i){var n=e.getElementsByTagName(t);return a(i)?n[i]:n}function S(e,t,i){var n=e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t);return a(i)?n[i]:n}function N(e,t){return t.length?f(t,function(t){N(e,t)}):void e.appendChild(t)}function V(e){e.parentNode&&e.parentNode.removeChild(e)}function P(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function F(e,t){o(e.textContent)?e.innerText=t:e.textContent=t}function A(e){return e.offsetWidth}function C(e){return n(e)?e.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""}function _(e,t){var i;return e.naturalWidth?t(e.naturalWidth,e.naturalHeight):(i=W.createElement("img"),i.onload=function(){t(this.width,this.height)},void(i.src=e.src))}function M(e){var t=[],i=e.rotate,n=e.scaleX,o=e.scaleY;return a(i)&&t.push("rotate("+i+"deg)"),a(n)&&a(o)&&t.push("scale("+n+","+o+")"),t.length?t.join(" "):"none"}function R(e,t){var i=this;i.element=e,i.options=v({},R.DEFAULTS,s(t)&&t),i.isImg=!1,i.isBuilt=!1,i.isShown=!1,i.isViewed=!1,i.isFulled=!1,i.isPlayed=!1,i.wheeling=!1,i.playing=!1,i.fading=!1,i.tooltiping=!1,i.transitioning=!1,i.action=!1,i.target=!1,i.timeout=!1,i.index=0,i.length=0,i.init()}var W=e.document,q=e.Event,O="viewer",B=O+"-toggle",H=O+"-fixed",j=O+"-open",U=O+"-show",Z=O+"-hide",K=O+"-fade",$=O+"-in",G=O+"-move",J=O+"-active",Q=O+"-invisible",ee=O+"-transition",te=O+"-fullscreen",ie=O+"-fullscreen-exit",ne=O+"-close",ae="mousedown touchstart pointerdown MSPointerDown",oe="mousemove touchmove pointermove MSPointerMove",re="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",se="wheel mousewheel DOMMouseScroll",le="transitionend",ue="load",ce="keydown",de="click",me="resize",fe="build",ve="built",he="show",ge="shown",we="hide",pe="hidden",be="view",ye="viewed",xe=/width|height|left|top|marginLeft|marginTop/,ze=/^\s+(.*)\s+$/,De=/\s+/,Te="undefined"!=typeof W.createElement(O).style.transition,Ie=Math.min,Ee=Math.max,ke=Math.abs,Le=Math.sqrt,Ye=Math.round,Xe={},Se=Xe.toString,Ne=Xe.hasOwnProperty;R.prototype={constructor:R,init:function(){var e=this,t=e.options,i=e.element,n="img"===i.tagName.toLowerCase(),a=n?[i]:X(i,"img"),o=a.length,r=h(e.ready,e);z(i,O)||(D(i,O,e),o&&(l(t.build)&&I(i,fe,t.build,!0),k(i,fe)!==!1&&(Te||(t.transition=!1),e.isImg=n,e.length=o,e.count=0,e.images=a,e.body=W.body,t.inline?(I(i,ve,function(){e.view()},!0),f(a,function(e){e.complete?r():I(e,ue,r,!0)})):(b(a,B),I(i,de,e._start=h(e.start,e))))))},ready:function(){var e=this;e.count++,e.count===e.length&&e.build()},build:function(){var e,t,i,n,a,o,r,s,u=this,c=u.options,d=u.element;u.isBuilt||(e=W.createElement("div"),e.innerHTML=R.TEMPLATE,u.parent=t=d.parentNode,u.viewer=i=S(e,"viewer-container",0),u.canvas=S(i,"viewer-canvas",0),u.footer=S(i,"viewer-footer",0),u.title=r=S(i,"viewer-title",0),u.toolbar=a=S(i,"viewer-toolbar",0),u.navbar=o=S(i,"viewer-navbar",0),u.button=n=S(i,"viewer-button",0),u.tooltipBox=S(i,"viewer-tooltip",0),u.player=S(i,"viewer-player",0),u.list=S(i,"viewer-list",0),x(r,Z,!c.title),x(a,Z,!c.toolbar),x(o,Z,!c.navbar),x(n,Z,!c.button),x(a.querySelectorAll("li[class*=zoom]"),Q,!c.zoomable),x(a.querySelectorAll("li[class*=flip]"),Q,!c.scalable),c.rotatable||(s=a.querySelectorAll("li[class*=rotate]"),b(s,Q),N(a,s)),c.inline?(b(n,te),g(i,{zIndex:c.zIndexInline}),"static"===w(t).position&&g(t,{position:"relative"})):(b(n,ne),b(i,H),b(i,K),b(i,Z),g(i,{zIndex:c.zIndex})),t.insertBefore(i,d.nextSibling),c.inline&&(u.render(),u.bind(),u.isShown=!0),u.isBuilt=!0,l(c.built)&&I(d,ve,c.built,!0),k(d,ve))},unbuild:function(){var e=this,t=e.options;e.isBuilt&&(t.inline&&y(e.element,Z),V(e.viewer))},bind:function(){var t=this,i=t.options,n=t.element,a=t.viewer;l(i.view)&&I(n,be,i.view),l(i.viewed)&&I(n,ye,i.viewed),I(a,de,t._click=h(t.click,t)),I(a,se,t._wheel=h(t.wheel,t)),I(t.canvas,ae,t._mousedown=h(t.mousedown,t)),I(W,oe,t._mousemove=h(t.mousemove,t)),I(W,re,t._mouseup=h(t.mouseup,t)),I(W,ce,t._keydown=h(t.keydown,t)),I(e,me,t._resize=h(t.resize,t))},unbind:function(){var t=this,i=t.options,n=t.element,a=t.viewer;l(i.view)&&E(n,be,i.view),l(i.viewed)&&E(n,ye,i.viewed),E(a,de,t._click),E(a,se,t._wheel),E(t.canvas,ae,t._mousedown),E(W,oe,t._mousemove),E(W,re,t._mouseup),E(W,ce,t._keydown),E(e,me,t._resize)},render:function(){var e=this;e.initContainer(),e.initViewer(),e.initList(),e.renderViewer()},initContainer:function(){var t=this;t.containerData={width:e.innerWidth,height:e.innerHeight}},initViewer:function(){var e,t=this,i=t.options,n=t.parent;i.inline&&(t.parentData=e={width:Ee(n.offsetWidth,i.minWidth),height:Ee(n.offsetHeight,i.minHeight)}),(t.isFulled||!e)&&(e=t.containerData),t.viewerData=v({},e)},renderViewer:function(){var e=this;e.options.inline&&!e.isFulled&&g(e.viewer,e.viewerData)},initList:function(){var e=this,t=e.options,i=e.element,a=e.list,o=[];f(e.images,function(a,r){var s=a.src,u=a.alt||C(s),c=t.url;s&&(n(c)?c=a.getAttribute(c):l(c)&&(c=c.call(i,e)),o.push('<li><img src="'+s+'" data-action="view" data-index="'+r+'" data-original-url="'+(c||s)+'" alt="'+u+'"></li>'))}),a.innerHTML=o.join(""),f(X(a,"img"),function(t){D(t,"filled",!0),I(t,ue,h(e.loadImage,e),!0)}),e.items=X(a,"li"),t.transition&&I(i,ye,function(){b(a,ee)},!0)},renderList:function(e){var t=this,i=e||t.index,n=t.items[i].offsetWidth,a=n+1;g(t.list,{width:a*t.length,marginLeft:(t.viewerData.width-n)/2-a*i})},resetList:function(){var e=this;P(e.list),y(e.list,ee),g({marginLeft:0})},initImage:function(e){var t=this,i=t.options,n=t.image,a=t.viewerData,o=t.footer.offsetHeight,r=a.width,s=Ee(a.height-o,o),u=t.imageData||{};_(n,function(n,a){var o,c,d=n/a,m=r,f=s;s*d>r?f=r/d:m=s*d,m=Ie(.9*m,n),f=Ie(.9*f,a),c={naturalWidth:n,naturalHeight:a,aspectRatio:d,ratio:m/n,width:m,height:f,left:(r-m)/2,top:(s-f)/2},o=v({},c),i.rotatable&&(c.rotate=u.rotate||0,o.rotate=0),i.scalable&&(c.scaleX=u.scaleX||1,c.scaleY=u.scaleY||1,o.scaleX=1,o.scaleY=1),t.imageData=c,t.initialImageData=o,l(e)&&e()})},renderImage:function(e){var t=this,i=t.image,n=t.imageData,a=M(n);g(i,{width:n.width,height:n.height,marginLeft:n.left,marginTop:n.top,WebkitTransform:a,msTransform:a,transform:a}),l(e)&&(t.transitioning?I(i,le,e,!0):e())},resetImage:function(){var e=this;V(e.image),e.image=null},start:function(e){var t=this,i=Y(e),n=i.target;p(n,B)&&(t.target=n,t.show())},click:function(e){var t=this,i=Y(e),n=i.target,a=z(n,"action"),o=t.imageData;switch(a){case"mix":t.isPlayed?t.stop():t.options.inline?t.isFulled?t.exit():t.full():t.hide();break;case"view":t.view(z(n,"index"));break;case"zoom-in":t.zoom(.1,!0);break;case"zoom-out":t.zoom(-.1,!0);break;case"one-to-one":1===o.ratio?t.zoomTo(t.initialImageData.ratio):t.zoomTo(1);break;case"reset":t.reset();break;case"prev":t.prev();break;case"play":t.play();break;case"next":t.next();break;case"rotate-left":t.rotate(-90);break;case"rotate-right":t.rotate(90);break;case"flip-horizontal":t.scale(-o.scaleX||-1,o.scaleY||1);break;case"flip-vertical":t.scale(o.scaleX||1,-o.scaleY||-1);break;default:t.isPlayed&&t.stop()}},load:function(){var e=this,t=e.options,i=e.image,n=e.viewerData;e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),y(i,Q),i.style.cssText="width:0;height:0;margin-left:"+n.width/2+"px;margin-top:"+n.height/2+"px;max-width:none!important;visibility:visible;",e.initImage(function(){x(i,ee,t.transition),x(i,G,t.movable),e.renderImage(function(){e.isViewed=!0,k(e.element,ye)})})},loadImage:function(e){var t=Y(e),i=t.target,n=i.parentNode,a=n.offsetWidth,o=n.offsetHeight,r=!!z(i,"filled");_(i,function(e,t){var n=e/t,s=a,l=o;o*n>a?r?s=o*n:l=a/n:r?l=a/n:s=o*n,g(i,{width:s,height:l,marginLeft:(a-s)/2,marginTop:(o-l)/2})})},resize:function(){var e=this;e.initContainer(),e.initViewer(),e.renderViewer(),e.renderList(),e.initImage(function(){e.renderImage()}),e.isPlayed&&f(X(e.player,"img"),function(t){I(t,ue,h(e.loadImage,e),!0),k(t,ue)})},wheel:function(e){var t=this,i=Y(e),n=Number(t.options.zoomRatio)||.1,a=1;t.isViewed&&(L(i),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),i.deltaY?a=i.deltaY>0?1:-1:i.wheelDelta?a=-i.wheelDelta/120:i.detail&&(a=i.detail>0?1:-1),t.zoom(-a*n,!0)))},keydown:function(e){var t=this,i=Y(e),n=t.options,a=i.which;if(t.isFulled&&n.keyboard)switch(a){case 27:t.isPlayed?t.stop():n.inline?t.isFulled&&t.exit():t.hide();break;case 32:t.isPlayed&&t.stop();break;case 37:t.prev();break;case 38:L(i),t.zoom(n.zoomRatio,!0);break;case 39:t.next();break;case 40:L(i),t.zoom(-n.zoomRatio,!0);break;case 48:case 49:(i.ctrlKey||i.shiftKey)&&(i.preventDefault(),1===t.imageData.ratio?t.zoomTo(t.initialImageData.ratio):t.zoomTo(1))}},mousedown:function(e){var t,i,n=this,a=n.options,o=Y(e),r=a.movable?"move":!1,s=o.touches;if(n.isViewed){if(s){if(t=s.length,t>1){if(!a.zoomable||2!==t)return;i=s[1],n.startX2=i.pageX,n.startY2=i.pageY,r="zoom"}else n.isSwitchable()&&(r="switch");i=s[0]}r&&(L(o),n.action=r,n.startX=i?i.pageX:o.pageX,n.startY=i?i.pageY:o.pageY)}},mousemove:function(e){var t,i,n=this,a=n.options,o=Y(e),r=n.action,s=n.image,l=o.touches;if(n.isViewed){if(l){if(t=l.length,t>1){if(!a.zoomable||2!==t)return;i=l[1],n.endX2=i.pageX,n.endY2=i.pageY}i=l[0]}r&&(L(o),"move"===r&&a.transition&&p(s,ee)&&y(s,ee),n.endX=i?i.pageX:o.pageX,n.endY=i?i.pageY:o.pageY,n.change())}},mouseup:function(e){var t=this,i=Y(e),n=t.action;n&&(L(i),"move"===n&&t.options.transition&&b(t.image,ee),t.action=!1)},show:function(){var e,t=this,i=t.options,n=t.element;return i.inline||t.transitioning?t:(t.isBuilt||t.build(),e=t.viewer,l(i.show)&&I(n,he,i.show,!0),k(n,he)===!1?t:(b(t.body,j),y(e,Z),I(n,ge,function(){t.view((t.target?d(t.target,c(t.images)):0)||t.index),t.target=!1},!0),i.transition?(t.transitioning=!0,b(e,ee),A(e),I(e,le,h(t.shown,t),!0),b(e,$)):(b(e,$),t.shown()),t))},hide:function(){var e=this,t=e.options,i=e.element,n=e.viewer;return t.inline||e.transitioning||!e.isShown?e:(l(t.hide)&&I(i,we,t.hide,!0),k(i,we)===!1?e:(e.isViewed&&t.transition?(e.transitioning=!0,I(e.image,le,function(){I(n,le,h(e.hidden,e),!0),y(n,$)},!0),e.zoomTo(0,!1,!0)):(y(n,$),e.hidden()),e))},view:function(e){var t,i,n,a,o,r=this,s=r.element,l=r.title,u=r.canvas;return e=Number(e)||0,!r.isShown||r.isPlayed||0>e||e>=r.length||r.isViewed&&e===r.index?r:k(s,be)===!1?r:(i=r.items[e],n=X(i,"img")[0],a=z(n,"originalUrl"),o=n.getAttribute("alt"),t=W.createElement("img"),t.src=a,t.alt=o,r.image=t,y(r.items[r.index],J),b(i,J),r.isViewed=!1,r.index=e,r.imageData=null,b(u,Q),P(u),N(u,t),t.complete?r.load():(I(t,ue,h(r.load,r),!0),r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(function(){y(t,Q)},1e3)),P(l),r.renderList(),I(s,ye,function(){var e=r.imageData,t=e.naturalWidth,i=e.naturalHeight;F(l,o+" ("+t+" Ã— "+i+")")},!0),r)},prev:function(){var e=this;return e.view(Ee(e.index-1,0)),e},next:function(){var e=this;return e.view(Ie(e.index+1,e.length-1)),e},move:function(e,t){var i=this,n=i.imageData;return i.moveTo(o(e)?e:n.left+Number(e),o(t)?t:n.top+Number(t)),i},moveTo:function(e,t){var i=this,n=i.imageData,r=!1;return o(t)&&(t=e),e=Number(e),t=Number(t),i.isViewed&&!i.isPlayed&&i.options.movable&&(a(e)&&(n.left=e,r=!0),a(t)&&(n.top=t,r=!0),r&&i.renderImage()),i},zoom:function(e,t){var i=this,n=i.imageData;return e=Number(e),e=0>e?1/(1-e):1+e,i.zoomTo(n.width*e/n.naturalWidth,t),i},zoomTo:function(e,t,i){var n,o,r=this,s=r.options,l=.01,u=100,c=r.imageData;return e=Ee(0,e),a(e)&&r.isViewed&&!r.isPlayed&&(i||s.zoomable)&&(i||(l=Ee(l,s.minZoomRatio),u=Ie(u,s.maxZoomRatio),e=Ie(Ee(e,l),u)),e>.95&&1.05>e&&(e=1),n=c.naturalWidth*e,o=c.naturalHeight*e,c.left-=(n-c.width)/2,c.top-=(o-c.height)/2,c.width=n,c.height=o,c.ratio=e,r.renderImage(),t&&r.tooltip()),r},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+Number(e)),t},rotateTo:function(e){var t=this,i=t.imageData;return e=Number(e),a(e)&&t.isViewed&&!t.isPlayed&&t.options.rotatable&&(i.rotate=e,t.renderImage()),t},scale:function(e,t){var i=this,n=i.imageData,r=!1;return o(t)&&(t=e),e=Number(e),t=Number(t),i.isViewed&&!i.isPlayed&&i.options.scalable&&(a(e)&&(n.scaleX=e,r=!0),a(t)&&(n.scaleY=t,r=!0),r&&i.renderImage()),i},scaleX:function(e){var t=this;return t.scale(e,t.imageData.scaleY),t},scaleY:function(e){var t=this;return t.scale(t.imageData.scaleX,e),t},play:function(){var e,t=this,i=t.options,n=t.player,o=h(t.loadImage,t),r=[],s=0,l=0;return!t.isShown||t.isPlayed?t:(i.fullscreen&&t.fullscreen(),t.isPlayed=!0,b(n,U),f(t.items,function(e,t){var a=X(e,"img")[0],u=W.createElement("img");u.src=z(a,"originalUrl"),u.alt=a.getAttribute("alt"),s++,b(u,K),x(u,ee,i.transition),p(e,J)&&(b(u,$),l=t),r.push(u),I(u,ue,o,!0),N(n,u)}),a(i.interval)&&i.interval>0&&(e=function(){t.playing=setTimeout(function(){y(r[l],$),l++,l=s>l?l:0,b(r[l],$),e()},i.interval)},s>1&&e()),t)},stop:function(){var e=this,t=e.player;return e.isPlayed?(e.isPlayed=!1,clearTimeout(e.playing),y(t,U),P(t),e):e},full:function(){var e=this,t=e.options,i=e.viewer,n=e.image,a=e.list;return!e.isShown||e.isPlayed||e.isFulled||!t.inline?e:(e.isFulled=!0,b(e.body,j),b(e.button,ie),t.transition&&(y(n,ee),y(a,ee)),b(i,H),i.setAttribute("style",""),g(i,{zIndex:t.zIndex}),e.initContainer(),e.viewerData=v({},e.containerData),e.renderList(),e.initImage(function(){e.renderImage(function(){t.transition&&setTimeout(function(){b(n,ee),b(a,ee)},0)})}),e)},exit:function(){var e=this,t=e.options,i=e.viewer,n=e.image,a=e.list;return e.isFulled?(e.isFulled=!1,y(e.body,j),y(e.button,ie),t.transition&&(y(n,ee),y(a,ee)),y(i,H),g(i,{zIndex:t.zIndexInline}),e.viewerData=v({},e.parentData),e.renderViewer(),e.renderList(),e.initImage(function(){e.renderImage(function(){t.transition&&setTimeout(function(){b(n,ee),b(a,ee)},0)})}),e):e},tooltip:function(){var e=this,t=e.options,i=e.tooltipBox,n=e.imageData;return e.isViewed&&!e.isPlayed&&t.tooltip?(F(i,Ye(100*n.ratio)+"%"),e.tooltiping?clearTimeout(e.tooltiping):t.transition?(e.fading&&k(i,le),b(i,U),b(i,K),b(i,ee),A(i),b(i,$)):b(i,U),e.tooltiping=setTimeout(function(){t.transition?(I(i,le,function(){y(i,U),y(i,K),y(i,ee),e.fading=!1},!0),y(i,$),e.fading=!0):y(i,U),e.tooltiping=!1},1e3),e):e},toggle:function(){var e=this;return 1===e.imageData.ratio?e.zoomTo(e.initialImageData.ratio):e.zoomTo(1),e},reset:function(){var e=this;return e.isViewed&&!e.isPlayed&&(e.imageData=v({},e.initialImageData),e.renderImage()),e},destroy:function(){var e=this,t=e.element;return e.options.inline?e.unbind():(e.isShown&&e.unbind(),y(e.images,B),E(t,de,e._start)),e.unbuild(),T(t,O),e},shown:function(){var e=this,t=e.options,i=e.element;e.transitioning=!1,e.isFulled=!0,e.isShown=!0,e.isVisible=!0,e.render(),e.bind(),l(t.shown)&&I(i,ge,t.shown,!0),k(i,ge)},hidden:function(){var e=this,t=e.options,i=e.element;e.transitioning=!1,e.isViewed=!1,e.isFulled=!1,e.isShown=!1,e.isVisible=!1,e.unbind(),y(e.body,j),b(e.viewer,Z),e.resetList(),e.resetImage(),l(t.hidden)&&I(i,pe,t.hidden,!0),k(i,pe)},fullscreen:function(){var e=this,t=W.documentElement;!e.isFulled||W.fullscreenElement||W.mozFullScreenElement||W.webkitFullscreenElement||W.msFullscreenElement||(t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},change:function(){var e=this,t=e.endX-e.startX,i=e.endY-e.startY;switch(e.action){case"move":e.move(t,i);break;case"zoom":e.zoom(function(e,t,i,n){var a=Le(e*e+t*t),o=Le(i*i+n*n);return(o-a)/a}(ke(e.startX-e.startX2),ke(e.startY-e.startY2),ke(e.endX-e.endX2),ke(e.endY-e.endY2))),e.startX2=e.endX2,e.startY2=e.endY2;break;case"switch":e.action="switched",t>1?e.prev():-1>t&&e.next()}e.startX=e.endX,e.startY=e.endY},isSwitchable:function(){var e=this,t=e.imageData,i=e.viewerData;return t.left>=0&&t.top>=0&&t.width<=i.width&&t.height<=i.height}},R.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5e3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},R.TEMPLATE='<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li class="viewer-zoom-in" data-action="zoom-in"></li><li class="viewer-zoom-out" data-action="zoom-out"></li><li class="viewer-one-to-one" data-action="one-to-one"></li><li class="viewer-reset" data-action="reset"></li><li class="viewer-prev" data-action="prev"></li><li class="viewer-play" data-action="play"></li><li class="viewer-next" data-action="next"></li><li class="viewer-rotate-left" data-action="rotate-left"></li><li class="viewer-rotate-right" data-action="rotate-right"></li><li class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>';var Ve=e.Viewer;return R.noConflict=function(){return e.Viewer=Ve,R},R.setDefaults=function(e){v(R.DEFAULTS,e)},"function"==typeof define&&define.amd&&define("viewer",[],function(){return R}),t||(e.Viewer=R),R});